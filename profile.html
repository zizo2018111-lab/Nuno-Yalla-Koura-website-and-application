<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n-key="profile_page_title">الملف الشخصي - نونو يلا كورة</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7794241141753129"
     crossorigin="anonymous"></script>

</head>
<body>

    <header>
        <a href="index.html" class="brand">
            <svg class="brand-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="32px" height="32px"><path d="M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M11,4.07v4.03l-4.93-2.25 C7.15,4.84,8.97,4.07,11,4.07z M4.26,8.31l4.93,2.25v2.88l-6.1,2.78C2.5,14.81,2,13.45,2,12C2,10.7,2.4,9.47,3.11,8.46 L4.26,8.31z M10,19.91v-4.03l4.93,2.25C13.85,19.16,12.03,19.93,10,19.91z M19.74,15.69l-4.93-2.25v-2.88l6.1-2.78 C21.5,9.19,22,10.55,22,12C22,13.3,21.6,14.53,20.89,15.54L19.74,15.69z"/></svg>
            <h1>نونو يلا كورة</h1>
        </a>
        <button class="mobile-nav-toggle" aria-controls="primary-navigation" aria-expanded="false"><span class="sr-only">Menu</span></button>
        <div class="primary-navigation" id="primary-navigation" data-visible="false">
            <nav>
                <ul>
                    <li><a href="index.html" data-i18n-key="nav_home">الرئيسية</a></li>
                    <li><a href="news.html" data-i18n-key="nav_news">الأخبار</a></li>
                    <li><a href="live.html" data-i18n-key="nav_live">بث مباشر</a></li>
                    <li><a href="todays-matches.html" data-i18n-key="nav_matches_today">مباريات اليوم</a></li>
                    <li><a href="standings.html" data-i18n-key="nav_standings">الترتيب</a></li>
                    <li><a href="topscorers.html" data-i18n-key="nav_top_scorers">الهدافين</a></li>
                    <li><a href="leagues.html" data-i18n-key="nav_leagues">الدوريات</a></li>
                    <li><a href="contact.html" data-i18n-key="nav_contact">اتصل بنا</a></li>
                </ul>
            </nav>
            <div class="search-container">
                <input type="search" id="search-input" data-i18n-placeholder="search_placeholder" placeholder="ابحث...">
            </div>
            <a href="login.html" class="login-btn" data-i18n-key="login_button">تسجيل الدخول</a>
        </div>
    </header>

    <main>
        <nav aria-label="breadcrumb">
          <ol>
            <li><a href="index.html" data-i18n-key="nav_home">الرئيسية</a></li>
            <li><span aria-current="page" data-i18n-key="profile_title">الملف الشخصي</span></li>
          </ol>
        </nav>

        <section class="content-section">
            <h3 data-i18n-key="profile_title">الملف الشخصي</h3>
            <div class="profile-details-container" id="profile-container">
                <!-- Profile details will be loaded here by JS -->
                <p style="text-align: center;">جاري تحميل بيانات الملف الشخصي...</p>
            </div>
        </section>

        <!-- New Section for Followed Matches -->
        <section class="content-section">
            <h3 data-i18n-key="followed_matches_title">المباريات المتابعة</h3>
            <div class="matches-container detailed-matches-container" id="followed-matches-container">
                <p style="text-align: center;">جاري تحميل المباريات المتابعة...</p>
            </div>
        </section>

        <!-- New Section for Saved Articles -->
        <section class="content-section">
            <h3 data-i18n-key="saved_articles_title">المقالات المحفوظة</h3>
            <div class="card-container" id="saved-articles-container">
                <p style="text-align: center;" data-i18n-key="no_saved_articles">ليس لديك مقالات محفوظة بعد.</p>
            </div>
        </section>
    </main>

    <footer class="footer-placeholder">
        <div class="footer-top">
            <div class="footer-about">
                <a href="index.html" class="brand">
                    <svg class="brand-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="32px" height="32px"><path d="M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M11,4.07v4.03l-4.93-2.25 C7.15,4.84,8.97,4.07,11,4.07z M4.26,8.31l4.93,2.25v2.88l-6.1,2.78C2.5,14.81,2,13.45,2,12C2,10.7,2.4,9.47,3.11,8.46 L4.26,8.31z M10,19.91v-4.03l4.93,2.25C13.85,19.16,12.03,19.93,10,19.91z M19.74,15.69l-4.93-2.25v-2.88l6.1-2.78 C21.5,9.19,22,10.55,22,12C22,13.3,21.6,14.53,20.89,15.54L19.74,15.69z"/></svg>
                    <h1>نونو يلا كورة</h1>
                </a>
                <p data-i18n-key="footer_welcome_message">موقع نونو يلا كورة، وجهتك الأولى لمتابعة عالم كرة القدم بشغف. نقدم لك آخر الأخبار، نتائج مباشرة، وجداول الترتيب.</p>
            </div>
            <div class="footer-links">
                <h4 data-i18n-key="footer_quick_links">روابط سريعة</h4>
                <ul>
                    <li><a href="index.html" data-i18n-key="nav_home">الرئيسية</a></li>
                    <li><a href="news.html" data-i18n-key="nav_news">الأخبار</a></li>
                    <li><a href="live.html" data-i18n-key="nav_live">بث مباشر</a></li>
                    <li><a href="todays-matches.html" data-i18n-key="nav_matches_today">مباريات اليوم</a></li>
                    <li><a href="standings.html" data-i18n-key="nav_standings">الترتيب</a></li>
                    <li><a href="topscorers.html" data-i18n-key="nav_top_scorers">الهدافين</a></li>
                </ul>
            </div>
            <div class="footer-contact-keywords">
                <h4 data-i18n-key="footer_contact_info">معلومات التواصل</h4>
                <p><span data-i18n-key="contact_email">البريد الإلكتروني</span>: <a href="mailto:zvzz275@gmail.com">zvzz275@gmail.com</a></p>
                <p><span data-i18n-key="contact_whatsapp">واتساب</span>: <a href="https://wa.me/+201279082485" target="_blank" rel="noopener noreferrer">01279082485</a></p>
                
                <h4 data-i18n-key="footer_keywords_title" style="margin-top: 1.5rem;">كلمات مفتاحية</h4>
                <p class="footer-keywords-list" data-i18n-key="footer_keywords_list">
                    مباريات اليوم, نتائج المباريات, بث مباشر, كورة لايف, يلا شوت, ترتيب الدوري المصري, ترتيب الدوري الإنجليزي, أهداف محمد صلاح, أخبار الأهلي, أخبار الزمالك, دوري أبطال أوروبا, مواعيد المباريات, القنوات الناقلة, جدول مباريات اليوم, ملخصات المباريات, أهداف اليوم, ترتيب هدافي الدوري الإنجليزي, أخبار ريال مدريد, أخبار برشلونة, يلا كورة, كورة بلس, في الجول
                </p>
            </div>
        </div>

        <div class="language-switcher">
            <span data-i18n-key="languages_label">اللغات:</span>
            <a href="#" onclick="event.preventDefault(); changeLanguage('ar')">العربية</a>
            <a href="#" onclick="event.preventDefault(); changeLanguage('en')">English</a>
            <a href="#" onclick="event.preventDefault(); changeLanguage('fr')">Français</a>
            <a href="#" onclick="event.preventDefault(); changeLanguage('es')">Español</a>
            <a href="#" onclick="event.preventDefault(); changeLanguage('de')">Deutsch</a>
            <a href="#" onclick="event.preventDefault(); changeLanguage('it')">Italiano</a>
            <a href="#" onclick="event.preventDefault(); changeLanguage('pt')">Português</a>
        </div>
        <div class="copyright">
            <p data-i18n-key="copyright">&copy; 2024 نونو يلا كورة. جميع الحقوق محفوظة. | <a href="privacy-policy.html" data-i18n-key="privacy_policy">سياسة الخصوصية</a> | <a href="contact.html" data-i18n-key="nav_contact">اتصل بنا</a></p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- User Profile Info ---
            const loggedInUser = localStorage.getItem('loggedInUser');
            const container = document.getElementById('profile-container');

            if (loggedInUser && container) {
                const userData = JSON.parse(loggedInUser);
                container.innerHTML = `
                    <div class="profile-card">
                        <img src="${userData.picture}" alt="Profile Picture" class="profile-card-pic">
                        <h4 class="profile-card-name">${userData.name}</h4>
                        <p class="profile-card-email">${userData.email}</p>
                    </div>
                `;
            } else {
                // If not logged in, redirect to login page
                window.location.href = 'login.html';
            }

            // --- Saved Articles ---
            // A small delay to ensure translations are loaded from script.js
            setTimeout(() => {
                const savedArticlesContainer = document.getElementById('saved-articles-container');
                const savedArticlesData = JSON.parse(localStorage.getItem('savedArticles')) || {};
                const articlesArray = Object.values(savedArticlesData);

                // Use the global renderNews function from script.js
                // The third parameter (pageSize) is omitted to show all articles.
                renderNews(articlesArray, savedArticlesContainer);
            }, 100);

            // --- Followed Matches ---
            const fetchFollowedMatches = () => {
                const followedMatchesIds = JSON.parse(localStorage.getItem('followedMatches')) || [];
                const container = document.getElementById('followed-matches-container');

                if (followedMatchesIds.length === 0) {
                    container.innerHTML = `<p style="text-align: center;" data-i18n-key="no_followed_matches">${translations.no_followed_matches || 'أنت لا تتابع أي مباريات حالياً.'}</p>`;
                    return;
                }
                
                // Use the centralized and secure fetchAndRenderMatches function
                const config = {
                    endpoint: `ids=${followedMatchesIds.join('-')}`,
                    containerId: 'followed-matches-container',
                    renderOptions: { showLineups: false, isProfilePage: true }, // isProfilePage flag helps rendering
                    noMatchesKey: 'no_followed_matches'
                };
                fetchAndRenderMatches(config);
            };

            // A small delay to ensure translations are loaded from script.js
            setTimeout(() => {
                fetchFollowedMatches();
            }, 100);
        });
    </script>
</body>
</html>